<mat-toolbar color="accent">
  <mat-toolbar-row>
    <button
      mat-button
      (click)="buildGroundtruth(0)"
      matTooltip="This preset illustrates a binary, highly unbalanced segmentation task."
    >
      Preset 1
    </button>
    <button
      mat-button
      (click)="buildGroundtruth(1)"
      matTooltip="Multi-classification example"
    >
      Preset 2
    </button>
    <button
      mat-button
      (click)="buildGroundtruth(2)"
      matTooltip="Medical image example on OCT"
    >
      Optical Coherence Tomography
    </button>
    <button
      mat-button
      (click)="buildGroundtruth(3)"
      matTooltip="Medical image example on Fundus image"
    >
      Fundus
    </button>
    <button mat-button (click)="buildGroundtruth(4)" matTooltip="You do you">
      Custom
    </button>
  </mat-toolbar-row>
</mat-toolbar>
<div class="central-container">

  <div class="panel-options">
    <div class="verticalGroup">
      <label>Tools</label>
      <mat-button-toggle-group>
        <mat-button-toggle
          [checked]="drawTool == 'draw'"
          (change)="changeTool('draw')"
          class="sizeButton"
          matTooltip="Draw on the reference or on the prediction images"
          ><mat-icon>brush</mat-icon></mat-button-toggle
        >
        <mat-button-toggle
          [checked]="drawTool == 'drag'"
          (change)="changeTool('drag')"
          class="sizeButton"
          matTooltip="Drag the cursor and see the evolution of the metrics while doing so. The final position of the cursor will be drawn."
          >Drag</mat-button-toggle
        >
        <mat-button-toggle
          [checked]="drawTool == 'fill'"
          (change)="changeTool('fill')"
          class="sizeButton"
          matTooltip="Click and fill a region defined by the groundtruth's segmentation with the active class (only applicable on prediction image)."
          ><mat-icon>colorize</mat-icon></mat-button-toggle
        >
      </mat-button-toggle-group>
    </div>
    <div class="verticalGroup">
      <label for="sliderRadius">Radius</label>
      <mat-slider
        id="sliderRadius"
        valueText="Radius"
        min="1"
        max="25"
        value="5"
        (input)="resizeBrush($event)"
        thumbLabel
        step="0.5"
        matTooltip="Vary the radius of the paintbrush"
      ></mat-slider>
    </div>

    <div class="verticalGroup">
      <label for="clearButton">Clear</label>

      <button id="clearButton" mat-button (click)="clearCanvas()">
        <mat-icon>delete</mat-icon>
      </button>
    </div>

    <div id="spacer"></div>
    <div class="verticalGroup growFlex">
      <label>Choose the active class</label>

      <mat-button-toggle-group
        id="classSelector"
        class="growFlex"
        [value]="classService.currentClass"
      >
        <mat-button-toggle
          class="growFlex sizeButton"
          mat-list-item
          *ngFor="
            let class of classService.classes;
            let i = index;
            last as last
          "
          [value]="i"
          (click)="changeActiveClass(i)"
          [style.background-color]="classService.getRGBStyleFromClass(i)"
        >
          {{ class }}
        </mat-button-toggle>
        <button
          mat-button
          (click)="addClass()"
          *ngIf="UICtrlService.currentPreset == 4"
        >
          <mat-icon>plus_one</mat-icon>
        </button>
      </mat-button-toggle-group>
    </div>
  </div>

  <div class="draw-container flex-vertical">
    <div
      class="canvas-container"
      [style.display]="UICtrlService.showReference ? 'initial' : 'none'"
    >
      <h3 class="canvas-label">Reference</h3>
      <div
        #cursor
        class="cursor"
        [style.top.px]="cursorPositionGT.y"
        [style.left.px]="cursorPositionGT.x"
        [style.transform]="getCursorTransform()"
      >
        <div
          class="cursor-radius"
          [style.border-color]="
            classService.getRGBStyleFromClass(classService.currentClass)
          "
        ></div>
        <mat-icon *ngIf="drawTool == 'draw'">brush</mat-icon>
      </div>

      <canvas
        #canvasVisu
        id="canvasVisu"
        [style.opacity.%]="overlayOpacity"
      ></canvas>
      <img class="imgBackground" [src]="imgSrc" *ngIf="imgSrc != ''" />
    </div>
    <div class="canvas-container">
      <h3 class="canvas-label">Prediction</h3>
      <div
        #cursor
        class="cursor"
        [style.top.px]="cursorPosition.y"
        [style.left.px]="cursorPosition.x"
        [style.transform]="getCursorTransform()"
      >
        <div
          class="cursor-radius"
          [style.border-color]="
            classService.getRGBStyleFromClass(classService.currentClass)
          "
        ></div>
        <mat-icon *ngIf="drawTool == 'draw'">brush</mat-icon>
        <mat-icon *ngIf="drawTool == 'fill'">colorize</mat-icon>
      </div>

      <canvas
        #canvas
        id="canvasDraw"
        [style.opacity.%]="overlayOpacity"
      ></canvas>
      <canvas
        #canvasGroundtruth
        id="canvasGroundtruth"
        [style.display]="
          UICtrlService.showOverlayReference ? 'initial' : 'none'
        "
      ></canvas>
      <img class="imgBackground" [src]="imgSrc" *ngIf="imgSrc != ''" />
    </div>
  </div>
  <app-presets (setExampleByID)="setupPresetExample($event)"></app-presets>

</div>
